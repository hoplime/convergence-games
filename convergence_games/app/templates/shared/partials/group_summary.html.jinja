{%
    set gm_classes = (
    "border-yellow-400" if group.is_gm else
    "border-red-400" if (group.is_gm_any_game and not group.is_checked_in) else
    "border-orange-400" if group.is_gm_any_game else
    "border-current")
%}
<div class="{{ gm_classes }} mx-auto flex w-full max-w-96 flex-col items-start justify-between rounded border p-2">
    <ul class="flex flex-col">
        {% for player in group.members %}
            <li>
                {{ player.name }}
                {% if group.is_gm %}
                    <span class="badge badge-outline gap-2 text-yellow-400">GM</span>
                {% elif group.is_gm_any_game %}
                    <span class="badge badge-outline gap-2 text-orange-400">GM Another</span>
                {% endif %}
                {% if not group.is_committed %}
                    <span class="badge badge-outline gap-2 text-red-400">Uncommitted</span>
                {% endif %}
                {% if not group.is_checked_in %}
                    <span class="badge badge-outline gap-2 text-red-400">Not Checked In</span>
                {% endif %}
                {% if player.id in compensation_summaries %}
                    {% set compensation_summary = compensation_summaries[player.id] %}
                    {% if "applied" in compensation_summary %}
                        {% set compensation = compensation_summary["applied"] %}
                    {% elif "draft" in compensation_summary %}
                        {% set compensation = compensation_summary["draft"] %}
                    {% endif %}
                    <span
                        class="{{ 'text-red-400' if compensation.compensation_delta > 0 else 'text-green-400' if compensation.compensation_delta < 0 }} badge badge-outline gap-2"
                    >
                        {% if compensation.reset %}
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                class="bi bi-arrow-clockwise inline"
                                viewBox="0 0 16 16"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"
                                />
                                <path
                                    d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"
                                />
                            </svg>
                        {% endif %}
                        {{ compensation.compensation_delta }}{{ ('<span class="text-yellow-400">D20</span>' if compensation.golden_d20_delta != 0) | safe }}{{ ' draft' if not compensation.applied }}
                    </span>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
    {{ render_partial('shared/partials/move_button.html.jinja', group_id=group.id, time_slot_id=time_slot_id, checkin=not group.is_checked_in) }}
</div>
